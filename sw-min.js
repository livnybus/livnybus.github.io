var CACHE="v2";function precache(){return caches.open(CACHE).then(function(e){return e.addAll(["./index.html","./main.js","./style.css","./buses.json"])})}function fromCache(n){return caches.open(CACHE).then(function(e){return e.match(n).then(function(e){return e||Promise.reject("no-match")})})}function update(t){return caches.open(CACHE).then(function(n){return fetch(t).then(function(e){return n.put(t,e)})})}self.addEventListener("install",function(e){e.waitUntil(precache())}),self.addEventListener("activate",function(e){console.log("Activating serviceWorker",CACHE),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(CACHE!==e)return console.log("Deleting out of date cache:",e),caches.delete(e)}))}))}),self.addEventListener("fetch",function(e){e.respondWith(fromCache(e.request)),e.waitUntil(update(e.request))});