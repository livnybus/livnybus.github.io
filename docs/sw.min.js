(function(){var fromCache,precache,update;precache=function(){return caches.open("v2").then(function(c){return c.addAll(["./index.html","./main.min.js","./style.min.js","./buses.json"])})},fromCache=function(req){return caches.open("v2").then(function(c){return c.match(req).then(function(matching){return matching||Promise.reject("no-match")})})},update=function(req){return caches.open("v2").then(function(c){return fetch(request).then(function(res){return cache.put(req,res)})})},self.addEventListener("install",function(e){return e.waitUntil(precache())}),self.addEventListener("activate",function(e){return e.waitUntil(caches.keys().then(function(names){return Promise.all(names.map(function(name){if("v2"!==name)return caches.delete(name)}))}))}),self.addEventListener("fetch",function(e){return e.respondWith(fromCache(e.request)),e.waitUntil(update(e.request))})}).call(this);